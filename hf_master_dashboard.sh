#!/bin/bash

echo "๐ญ Hyper Factory - Master Dashboard ๐"
echo "======================================"
echo "โฐ $(date)"
echo "๐ $(pwd)"
echo ""

# ุงูุฃููุงู
GREEN='\033[0;32m'
YELLOW='\033[1;33m'
BLUE='\033[0;34m'
RED='\033[0;31m'
NC='\033[0m'

# ุฏุงูุฉ ููุชูููุน
print_step() {
    echo -e "${BLUE}๐น $1${NC}"
}

print_success() {
    echo -e "${GREEN}โ $1${NC}"
}

print_warning() {
    echo -e "${YELLOW}โ๏ธ  $1${NC}"
}

print_error() {
    echo -e "${RED}โ $1${NC}"
}

# ุงูุชุฃูุฏ ูู ุงููุณุงุฑ ุงูุตุญูุญ
cd /root/hyper-factory || {
    print_error "ูุง ูููู ุงููุตูู ุฅูู /root/hyper-factory"
    exit 1
}

echo "๐ ุงููุณุงุฑ ุงูุญุงูู: $(pwd)"
echo ""

# ============================================================================
# ุงููุฑุญูุฉ 1: ุงููุญูุตุงุช ุงูุฃุณุงุณูุฉ ูุงูุชุดุฎูุต
# ============================================================================

echo "๐ฏ ุงููุฑุญูุฉ 1: ุงููุญูุตุงุช ุงูุฃุณุงุณูุฉ ูุงูุชุดุฎูุต"
echo "----------------------------------------"

print_step "1. ุชุดุบูู ูุญุต ุงูุญุงูุฉ ุงูุดุงูู..."
if [ -f "./hf_comprehensive_health_check.sh" ]; then
    ./hf_comprehensive_health_check.sh
else
    print_warning "ููู hf_comprehensive_health_check.sh ุบูุฑ ููุฌูุฏ"
fi

echo ""

print_step "2. ุชุฏููู ุงูุจููุฉ ุงูุชุญุชูุฉ ุงููุชูุฏูุฉ..."
if [ -f "./hf_audit_advanced_infra.sh" ]; then
    ./hf_audit_advanced_infra.sh
else
    print_warning "ููู hf_audit_advanced_infra.sh ุบูุฑ ููุฌูุฏ"
fi

echo ""

print_step "3. ุงูุจุญุซ ุงูุดุงูู ุนู ุฌููุน ุงูุนูุงู..."
./hf_find_all_agents.sh

echo ""

print_step "4. ุชุญููู ููุตู ูุนุงูู debug_expert..."
./hf_agent_details.sh debug_expert

echo ""

print_step "5. ุงูุจุญุซ ุนู ุงูุนูุงู ุงููุชุนููุฉ ุจุงูุจูุงูุงุช..."
./hf_find_all_agents.sh | grep -E "DATA|INGEST|PROCESS"

echo ""

print_step "6. ุงูุจุญุซ ุนู ุงูุนูุงู ุงููุดุทุฉ ููุท..."
./hf_find_all_agents.sh | grep "๐ข\|โ"

echo ""

# ============================================================================
# ุงููุฑุญูุฉ 2: ูุญุต ุงููููู ูุงููููุงุช
# ============================================================================

echo "๐ฏ ุงููุฑุญูุฉ 2: ูุญุต ุงููููู ูุงููููุงุช"
echo "--------------------------------"

print_step "7. ูุญุต ุงููููู ุงูุญุงูู ูููุธุงู..."
echo "๐ ูููู ุงููุฌูุฏุงุช ุงูุฑุฆูุณูุฉ:"
ls -la /root/hyper-factory/ | head -15

echo ""

print_step "8. ูุญุต ูููุงุช ุงูุชูููู..."
echo "โ๏ธ  ูููุงุช ุงูุชูููู ุงููุชุงุญุฉ:"
ls -la /root/hyper-factory/config/

echo ""

print_step "9. ูุญุต ุณูุฑูุจุชุงุช ุงูุชุดุบูู..."
echo "๐ ุณูุฑูุจุชุงุช ุงูุชุดุบูู ุงููุชุงุญุฉ:"
ls -la /root/hyper-factory/hf_run_*.sh | head -10

echo ""

# ============================================================================
# ุงููุฑุญูุฉ 3: ุชุดุบูู ุงููุตูุน ุงูุฃุณุงุณู
# ============================================================================

echo "๐ฏ ุงููุฑุญูุฉ 3: ุชุดุบูู ุงููุตูุน ุงูุฃุณุงุณู"
echo "--------------------------------"

print_step "10. ุชุดุบูู ุฏูุฑุฉ ุงููุตูุน ุงูุฃุณุงุณูุฉ..."
./run_basic_with_memory.sh

echo ""

# ============================================================================
# ุงููุฑุญูุฉ 4: ุงูุชุดุบูู ุงููุชูุฏู ูุงูุนูุงูู
# ============================================================================

echo "๐ฏ ุงููุฑุญูุฉ 4: ุงูุชุดุบูู ุงููุชูุฏู ูุงูุนูุงูู"
echo "-------------------------------------"

print_step "11. ุชุดุบูู Ops Master ุงูุดุงูู..."
./hf_ops_master.sh

echo ""

print_step "12. ุชุญุฏูุซ ููุญุฉ ุงูุฅุฏุงุฑุฉ..."
./hf_run_manager_dashboard.sh

echo ""

print_step "13. ุฅูุดุงุก ุณูุงู AI ูุญุฏุซ..."
./hf_export_ai_context.sh

echo ""

print_step "14. ุฅูุดุงุก ุชูุฑูุฑ ุงููุงูู ุงููุญุฏุซ..."
./hf_export_owner_report.sh

echo ""

# ============================================================================
# ุงููุฑุญูุฉ 5: ุงูุชุดุฎูุต ูุงูุชุญููู
# ============================================================================

echo "๐ฏ ุงููุฑุญูุฉ 5: ุงูุชุดุฎูุต ูุงูุชุญููู"
echo "-----------------------------"

print_step "15. ุชุดุฎูุต ุญุงูุฉ ุงูุนูู (Brain State)..."
./hf_diag_brain.sh

echo ""

print_step "16. ุฅูุดุงุก ูููุงุช ุงูุฃููููุฉ..."
./hf_create_priority_files.sh

echo ""

# ============================================================================
# ุงููุฑุญูุฉ 6: ุงูุชูุงุฑูุฑ ุงูููุงุฆูุฉ
# ============================================================================

echo "๐ฏ ุงููุฑุญูุฉ 6: ุงูุชูุงุฑูุฑ ุงูููุงุฆูุฉ"
echo "-----------------------------"

print_step "17. ุนุฑุถ ุงูุชูุงุฑูุฑ ุงูููุงุฆูุฉ..."
./hf_show_reports.sh

echo ""

print_step "18. ุนุฑุถ ุฃุญุฏุซ ุชูุงุฑูุฑ ุงููุงูู..."
latest_owner=$(ls -1t reports/ai/OWNER_*_owner_report.md 2>/dev/null | head -1)
if [ -n "$latest_owner" ]; then
    echo "๐ ุฃุญุฏุซ ุชูุฑูุฑ ูุงูู: $latest_owner"
    echo "--- ูุนุงููุฉ ---"
    head -10 "$latest_owner" 2>/dev/null || echo "โ๏ธ  ูุง ูููู ูุฑุงุกุฉ ุงูููู"
else
    print_warning "ูุง ุชูุฌุฏ ุชูุงุฑูุฑ ูุงูู ูุชุงุญุฉ"
fi

echo ""

print_step "19. ุนุฑุถ ุฃุญุฏุซ ุชูุงุฑูุฑ ุงููุฏูุฑ..."
latest_manager=$(ls -1t reports/management/*_manager_daily_overview.txt 2>/dev/null | head -1)
if [ -n "$latest_manager" ]; then
    echo "๐ ุฃุญุฏุซ ุชูุฑูุฑ ูุฏูุฑ: $latest_manager"
    echo "--- ูุนุงููุฉ ---"
    head -10 "$latest_manager" 2>/dev/null || echo "โ๏ธ  ูุง ูููู ูุฑุงุกุฉ ุงูููู"
else
    print_warning "ูุง ุชูุฌุฏ ุชูุงุฑูุฑ ูุฏูุฑ ูุชุงุญุฉ"
fi

echo ""

print_step "20. ูุญุต ุงููุฎุฑุฌุงุช ุงูุญุฏูุซุฉ..."
echo "๐ ุฃุญุฏุซ ุงููููุงุช ูู reports/:"
find reports/ -type f -name "*.md" -o -name "*.txt" -o -name "*.json" 2>/dev/null | xargs ls -lt 2>/dev/null | head -10

echo ""

# ============================================================================
# ุงููุฑุญูุฉ 7: ุงูุฅุญุตุงุฆูุงุช ุงูููุงุฆูุฉ
# ============================================================================

echo "๐ฏ ุงููุฑุญูุฉ 7: ุงูุฅุญุตุงุฆูุงุช ุงูููุงุฆูุฉ"
echo "-------------------------------"

print_step "21. ุฅุญุตุงุฆูุงุช ุงููุธุงู ุงูููุงุฆูุฉ..."
echo "๐ ุฅุญุตุงุฆูุงุช ุดุงููุฉ:"
echo "   - ุนุฏุฏ ุชูุงุฑูุฑ AI: $(find reports/ai/ -name "*.md" -o -name "*.txt" 2>/dev/null | wc -l)"
echo "   - ุนุฏุฏ ุชูุงุฑูุฑ ุงูุฅุฏุงุฑุฉ: $(find reports/management/ -name "*.txt" 2>/dev/null | wc -l)"
echo "   - ุนุฏุฏ ูููุงุช ุงูุฐุงูุฑุฉ: $(find ai/memory/ -name "*.json" -o -name "*.txt" 2>/dev/null | wc -l)"
echo "   - ุนุฏุฏ ุณูุฑูุจุชุงุช ุงูุชุดุบูู: $(find . -name "hf_run_*.sh" -o -name "run_*.sh" 2>/dev/null | wc -l)"

echo ""

# ============================================================================
# ุงูุฎูุงุตุฉ ุงูููุงุฆูุฉ
# ============================================================================

echo "๐ฏ ุงูุฎูุงุตุฉ ุงูููุงุฆูุฉ"
echo "-----------------"

print_success "โ ุงูุชููุช ุฏูุฑุฉ Hyper Factory ุงููุงููุฉ!"
echo ""
echo "๐ ููุฎุต ุงูุฅูุฌุงุฒุงุช:"
echo "   ๐ ูุญูุตุงุช ุดุงููุฉ ูููุธุงู"
echo "   ๐๏ธ  ุชุดุบูู ุงููุตูุน ุงูุฃุณุงุณู"
echo "   ๐ค ุชุดุบูู ุงูุนูุงูู ุงููุชูุฏูุฉ"
echo "   ๐ ุชุญุฏูุซ ููุญุงุช ุงูุฅุฏุงุฑุฉ"
echo "   ๐ง ุชุดุฎูุต ุญุงูุฉ ุงูุนูู"
echo "   ๐ ุฅูุดุงุก ุงูุชูุงุฑูุฑ ุงูููุงุฆูุฉ"
echo ""
echo "๐ ุงููุฎุฑุฌุงุช ุงูุฑุฆูุณูุฉ:"
echo "   - ุชูุงุฑูุฑ AI ูู: reports/ai/"
echo "   - ุชูุงุฑูุฑ ุงูุฅุฏุงุฑุฉ ูู: reports/management/"
echo "   - ุฐุงูุฑุฉ ุงููุธุงู ูู: ai/memory/"
echo "   - ุณุฌูุงุช ุงูุชุดุบูู ูู: logs/"
echo ""
echo "๐ ููุช ุงูุงูุชูุงุก: $(date)"
echo "======================================"

